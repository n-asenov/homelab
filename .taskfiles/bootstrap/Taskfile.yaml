---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

tasks:
  rook:
    cmds:
      - talosctl --nodes 192.168.0.24 wipe disk nvme0n1
      - talosctl --nodes 192.168.0.25 wipe disk nvme0n1
      - talosctl --nodes 192.168.0.26 wipe disk nvme0n1

  main:
    cmds:
      - task: :terraform:apply
      - task: :terraform:output
      - task: rook
      - task: :flux:bootstrap
      - task: :terraform:bootstrap
